<!DOCTYPE html>
<html>
  <head>
    <title>Experiment</title>
    <script src="jspsych-6.3.1/jspsych.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
    <script src ="jspsych-6.3.1/plugins/jspsych-multi-stim-multi-response.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-preload.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-survey-likert.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-html-button-response.js"></script>
    <link href="jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">

</head>
<body></body>
<script>

/* welcome message */
var welcome = {
  type: 'html-button-response',
  stimulus: '<p>Welcome! <br> In this experiment, multiple images will be presented for a short period of time. <b> Try to remember those images in detail.</b> <br>After the sequence, you will be presented one of the images one more time and will be asked if the image size-wise matches one of the previously presented images. <br><br><br><br></p> <p style="font-size:12px; color:grey">Tap the button to begin.</p>',
  choices: ['Continue'],
  prompt: null,
    }
    
var timestamp = (new Date).toISOString().replaceAll(":", "-").replaceAll("T", "-").trim(); 
jsPsych.data.addProperties({Timestamp: timestamp});

/* TRIAL */ 
/* Entry message */
var trialMessage = {
      type: 'html-button-response',
      stimulus: '<p>A trial round will be now presented. You will see three sceneries and will be later asked to compare one of those images with previously presented one.</p><br><br><br><br> <p style="font-size:12px; color:grey">Tap the button to continue.</p>',
      choices: ['Continue'],
      prompt: null,
    }

/* Fixation */
var fixation = {
     type: 'html-keyboard-response',
     stimulus: '<div style="font-size:60px;">+</div>',
     choices: jsPsych.NO_KEYS,
     trial_duration: 1500,
    }

/* Trial test round*/
var stimulus1 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s30.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus2 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s29.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus3 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_35.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

/* mask after Trial round*/
var mask1= { 
      type: 'image-keyboard-response',
      stimulus: 'images/masks/mask4.jpg',
      stimulus_width: 1000,
      choices: jsPsych.NO_KEYS,
      trial_duration: 1500,
    }
  
/* Likert scale - BE prep */
var scale_1 = [
  "Further", 
  "Slightly further", 
  "The same", 
  "Slightly closer", 
  "Closer",
  ];

/* BE rating - Likert scale page */
var likertBETrial = {
  type: 'survey-likert',
  preamble: '<img src="images/BE_35.jpg"; width="1000"></img>',
  questions: [
    {prompt: "In comparison with the same scene presented before, this photograph appears:", labels: scale_1}
  ] }; 

/* Likert scale - confidence prep */
var scale_2 = [
  "Sure", 
  "Pretty sure", 
  "Not sure", 
  ];

/* Likert scale page */
var likertConfTrial = {
  type: 'survey-likert',
  questions: [
    {prompt: "How sure I am about my answer", labels: scale_2}
  ] }; 

  var postTrialMessage = {
        type: 'html-button-response',
        stimulus: '<p>You have finished the trial! </p><br><br><br><br><p style="font-size:12px; color:grey">Tap the button to continue.</p>',
        choices: ['Continue'],
        prompt: null,
    }

        
/* FIRST ROUND - CC */ 
/* fixation */  
var fixation = {
     type: 'html-keyboard-response',
     stimulus: '<div style="font-size:60px;">+</div>',
     choices: jsPsych.NO_KEYS,
     trial_duration: 1,
    }

/* test round 1*/
var stimulus4 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_10.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus5 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s1.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus6 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_12.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

/* mask after first test round*/
var mask2= { 
      type: 'image-keyboard-response',
      stimulus: 'images/masks/mask1.jpg',
      stimulus_width: 1000,
      choices: jsPsych.NO_KEYS,
      trial_duration: 1500,
    }
  
/* BE rating - Likert scale page */
var likertBE1 = {
  type: 'survey-likert',
  preamble: '<img src="images/BE_12.jpg"; width="1000"></img>',
  questions: [
    {prompt: "In comparison with the same scene presented before, this photograph appears:", labels: scale_1}
  ] }; 

/* Likert scale page - Confidence */
var likertConf1 = {
  type: 'survey-likert',
  questions: [
    {prompt: "How sure I am about my answer", labels: scale_2}
  ] }; 


/* SECOND ROUND - CW */ 
/* fixation */  
var fixation = {
     type: 'html-keyboard-response',
     stimulus: '<div style="font-size:60px;">+</div>',
     choices: jsPsych.NO_KEYS,
     trial_duration: 1500,
    }

/* test round 2*/
var stimulus7 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_11.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus8 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s3.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus9 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s6.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

/* mask after test round 2*/
var mask3= { 
      type: 'image-keyboard-response',
      stimulus: 'images/masks/mask2.jpg',
      stimulus_width: 1000,
      choices: jsPsych.NO_KEYS,
      trial_duration: 1500,
    }
  
/* BE rating - Likert scale page */
var likertBE2 = {
  type: 'survey-likert',
  preamble: '<img src="images/BE_s3.jpg"; width="1000"></img>',
  questions: [
    {prompt: "In comparison with the same scene presented before, this photograph appears:", labels: scale_1}
  ] }; 

/* Confidence likert scale page */
var likertConf2 = {
  type: 'survey-likert',
  questions: [
    {prompt: "How sure I am about my answer", labels: scale_2}
  ] }; 

/* THIRD ROUND - WW */ 
/* fixation */  
var fixation = {
     type: 'html-keyboard-response',
     stimulus: '<div style="font-size:60px;">+</div>',
     choices: jsPsych.NO_KEYS,
     trial_duration: 1500,
    }

/* test round 3 starts*/
var stimulus10 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_16.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus11 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_18.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus12 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s19.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

/* mask after test round 3*/
var mask4= { 
      type: 'image-keyboard-response',
      stimulus: 'images/masks/mask5.jpg',
      stimulus_width: 1000,
      choices: jsPsych.NO_KEYS,
      trial_duration: 1500,
    }
  
/* BE rating - Likert scale page */
var likertBE3 = {
  type: 'survey-likert',
  preamble: '<img src="images/BE_18.jpg"; width="1000"></img>',
  questions: [
    {prompt: "In comparison with the same scene presented before, this photograph appears:", labels: scale_1}
  ] }; 

/* Confidecne rating Likert scale page */
var likertConf3 = {
  type: 'survey-likert',
  questions: [
    {prompt: "How sure I am about my answer", labels: scale_2}
  ] }; 

/* FOURTH ROUND - WC */ 
/* fixation */  
var fixation = {
     type: 'html-keyboard-response',
     stimulus: '<div style="font-size:60px;">+</div>',
     choices: jsPsych.NO_KEYS,
     trial_duration: 1500,
    }

/* test round 4*/
var stimulus13 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s13.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus14 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_s10.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

var stimulus15 = { 
      type: 'image-keyboard-response',
      stimulus: 'images/BE_27.jpg',
      choices: jsPsych.NO_KEYS,
      stimulus_width: 1000,
      trial_duration: 3000,
    }

/* mask after test round 4*/
var mask5= { 
      type: 'image-keyboard-response',
      stimulus: 'images/masks/mask5.jpg',
      stimulus_width: 1000,
      choices: jsPsych.NO_KEYS,
      trial_duration: 1500,
    }
  
/* BE rating - Likert scale page */
var likertBE4 = {
  type: 'survey-likert',
  preamble: '<img src="images/BE_s13.jpg"; width="1000"></img>',
  questions: [
    {prompt: "In comparison with the same scene presented before, this photograph appears:", labels: scale_1}
  ] }; 

/* Likert scale page - Confidence */
var likertConf4 = {
  type: 'survey-likert',
  questions: [
    {prompt: "How sure I am about my answer", labels: scale_2}
  ] }; 

  /* Debriefing message */
var debriefing = {
        type: 'html-button-response',
        stimulus: 'Thank you! You have completed all trials!`</p><br><br><br><br><p style="font-size:12px; color:grey">Tap the button to continue.</p>',
        choices: ['Download results'],
        prompt: null,
    }

var timeline = [welcome, trialMessage, fixation, stimulus1, stimulus2, stimulus3, mask1, likertBETrial, likertConfTrial, postTrialMessage, fixation, stimulus4, stimulus5, stimulus6, mask2, likertBE1, likertConf1, fixation, stimulus7, stimulus8, stimulus9, mask3, likertBE2, likertConf2, fixation, stimulus10, stimulus11, stimulus12, mask4, likertBE3, likertConf3, fixation, stimulus13, stimulus14, stimulus15, mask5, likertBE4, likertConf4, debriefing];  
jsPsych.init({
    timeline: timeline,
    on_finish: function() {
      jsPsych.data.displayData('json');
      var file_name = 'subject_' + timestamp + '_data.json';
      jsPsych.data.get().localSave('json',file_name);
       }
    });
</script>
</html>
